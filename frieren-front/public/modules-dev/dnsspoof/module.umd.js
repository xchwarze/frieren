(function(a,b){typeof exports=="object"&&typeof module<"u"?module.exports=b(require("react/jsx-runtime"),require("yup"),require("react"),require("react-hook-form"),require("@hookform/resolvers/yup"),require("@tanstack/react-query"),require("jotai"),require("wouter"),require("jotai/utils")):typeof define=="function"&&define.amd?define(["react/jsx-runtime","yup","react","react-hook-form","@hookform/resolvers/yup","@tanstack/react-query","jotai","wouter","jotai/utils"],b):(a=typeof globalThis<"u"?globalThis:a||self,a.FrierenModuleDnsspoof=b(a.jsxRuntime,a.Yup,a.React,a.ReactHookForm,a.HookformResolversYup,a.ReactQuery,a.Jotai,a.Wouter,a.JotaiUtils))})(this,function(a,b,C,$,Qe,I,Ye,Je,ze){"use strict";function Z(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:()=>e[o]})}}return t.default=e,Object.freeze(t)}const D=Z(b),u=Z(C);function X(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function o(){for(var r=[],s=0;s<arguments.length;s++){var n=arguments[s];if(n){var c=typeof n;if(c==="string"||c==="number")r.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&r.push(i)}}else if(c==="object"){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){r.push(n.toString());continue}for(var d in n)t.call(n,d)&&n[d]&&r.push(d)}}}return r.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(R);var Ze=R.exports;const m=X(Ze),Xe=["xxl","xl","lg","md","sm","xs"],H=u.createContext({prefixes:{},breakpoints:Xe,minBreakpoint:"xs"});function y(e,t){const{prefixes:o}=C.useContext(H);return e||o[t]||t}function Re(){const{breakpoints:e}=C.useContext(H);return e}function et(){const{minBreakpoint:e}=C.useContext(H);return e}const ee=u.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},s)=>(t=y(t,"card-body"),a.jsx(o,{ref:s,className:m(e,t),...r})));ee.displayName="CardBody";const te=ee,oe=u.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},s)=>(t=y(t,"card-footer"),a.jsx(o,{ref:s,className:m(e,t),...r})));oe.displayName="CardFooter";const tt=oe,re=u.createContext(null);re.displayName="CardHeaderContext";const ot=re,se=u.forwardRef(({bsPrefix:e,className:t,as:o="div",...r},s)=>{const n=y(e,"card-header"),c=C.useMemo(()=>({cardHeaderBsPrefix:n}),[n]);return a.jsx(ot.Provider,{value:c,children:a.jsx(o,{ref:s,...r,className:m(t,n)})})});se.displayName="CardHeader";const rt=se,ne=u.forwardRef(({bsPrefix:e,className:t,variant:o,as:r="img",...s},n)=>{const c=y(e,"card-img");return a.jsx(r,{ref:n,className:m(o?`${c}-${o}`:c,t),...s})});ne.displayName="CardImg";const st=ne,ae=u.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},s)=>(t=y(t,"card-img-overlay"),a.jsx(o,{ref:s,className:m(e,t),...r})));ae.displayName="CardImgOverlay";const nt=ae,ce=u.forwardRef(({className:e,bsPrefix:t,as:o="a",...r},s)=>(t=y(t,"card-link"),a.jsx(o,{ref:s,className:m(e,t),...r})));ce.displayName="CardLink";const at=ce,le=e=>u.forwardRef((t,o)=>a.jsx("div",{...t,ref:o,className:m(t.className,e)})),ct=le("h6"),ie=u.forwardRef(({className:e,bsPrefix:t,as:o=ct,...r},s)=>(t=y(t,"card-subtitle"),a.jsx(o,{ref:s,className:m(e,t),...r})));ie.displayName="CardSubtitle";const lt=ie,de=u.forwardRef(({className:e,bsPrefix:t,as:o="p",...r},s)=>(t=y(t,"card-text"),a.jsx(o,{ref:s,className:m(e,t),...r})));de.displayName="CardText";const it=de,dt=le("h5"),ue=u.forwardRef(({className:e,bsPrefix:t,as:o=dt,...r},s)=>(t=y(t,"card-title"),a.jsx(o,{ref:s,className:m(e,t),...r})));ue.displayName="CardTitle";const ut=ue,pe=u.forwardRef(({bsPrefix:e,className:t,bg:o,text:r,border:s,body:n=!1,children:c,as:i="div",...d},l)=>{const h=y(e,"card");return a.jsx(i,{ref:l,...d,className:m(t,h,o&&`bg-${o}`,r&&`text-${r}`,s&&`border-${s}`),children:n?a.jsx(te,{children:c}):c})});pe.displayName="Card";const O=Object.assign(pe,{Img:st,Title:ut,Subtitle:lt,Body:te,Link:at,Text:it,Header:rt,Footer:tt,ImgOverlay:nt}),pt=["as","disabled"];function ft(e,t){if(e==null)return{};var o={},r=Object.keys(e),s,n;for(n=0;n<r.length;n++)s=r[n],!(t.indexOf(s)>=0)&&(o[s]=e[s]);return o}function mt(e){return!e||e.trim()==="#"}function fe({tagName:e,disabled:t,href:o,target:r,rel:s,role:n,onClick:c,tabIndex:i=0,type:d}){e||(o!=null||r!=null||s!=null?e="a":e="button");const l={tagName:e};if(e==="button")return[{type:d||"button",disabled:t},l];const h=g=>{if((t||e==="a"&&mt(o))&&g.preventDefault(),t){g.stopPropagation();return}c==null||c(g)},v=g=>{g.key===" "&&(g.preventDefault(),h(g))};return e==="a"&&(o||(o="#"),t&&(o=void 0)),[{role:n??"button",disabled:void 0,tabIndex:t?void 0:i,href:o,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:h,onKeyDown:v},l]}const ht=u.forwardRef((e,t)=>{let{as:o,disabled:r}=e,s=ft(e,pt);const[n,{tagName:c}]=fe(Object.assign({tagName:o,disabled:r},s));return a.jsx(c,Object.assign({},s,n,{ref:t}))});ht.displayName="Button";const me=u.forwardRef(({as:e,bsPrefix:t,variant:o="primary",size:r,active:s=!1,disabled:n=!1,className:c,...i},d)=>{const l=y(t,"btn"),[h,{tagName:v}]=fe({tagName:e,disabled:n,...i}),g=v;return a.jsx(g,{...h,...i,ref:d,disabled:n,className:m(c,l,s&&"active",o&&`${l}-${o}`,r&&`${l}-${r}`,i.href&&n&&"disabled")})});me.displayName="Button";const M=me,he=u.forwardRef(({bsPrefix:e,variant:t,animation:o="border",size:r,as:s="div",className:n,...c},i)=>{e=y(e,"spinner");const d=`${e}-${o}`;return a.jsx(s,{ref:i,...c,className:m(n,d,r&&`${d}-${r}`,t&&`text-${t}`)})});he.displayName="Spinner";const V=he;var ye={exports:{}},yt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gt=yt,Ct=gt;function ge(){}function Ce(){}Ce.resetWarningCache=ge;var vt=function(){function e(r,s,n,c,i,d){if(d!==Ct){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ce,resetWarningCache:ge};return o.PropTypes=o,o};ye.exports=vt();var Nt=ye.exports;const p=X(Nt),_=({name:e,...t})=>a.jsx(a.Fragment,{children:e.endsWith(".svg")?a.jsx("img",{alt:"",src:e,className:"icon-svg",...t}):a.jsx("i",{className:`icon-${e}`,...t})});_.propTypes={name:p.string.isRequired};const ve=({title:e,subtitle:t,showRefresh:o=!0,query:r,refetch:s,isFetching:n,children:c,...i})=>{const d=s||r&&r.refetch,l=n!==void 0?n:r&&r.isFetching;return a.jsx(O,{...i,children:a.jsxs(O.Body,{children:[a.jsxs(O.Title,{className:"card-title",children:[e,o&&a.jsx(M,{variant:"outline-secondary",disabled:l,onClick:d,className:"btn-icon",children:a.jsx(_,{name:`refresh-cw ${l?"icon-spin":""}`})})]}),t&&a.jsx(O.Subtitle,{className:"mb-3 text-muted",children:t}),l&&a.jsx("div",{className:"text-center",children:a.jsx(V,{animation:"border"})}),c]})})};ve.propTypes={title:p.string.isRequired,subtitle:p.string,showRefresh:p.bool,query:p.object,refetch:p.func,isFetching:p.bool,children:p.any.isRequired};const Ft={type:p.string,tooltip:p.bool,as:p.elementType},U=u.forwardRef(({as:e="div",className:t,type:o="valid",tooltip:r=!1,...s},n)=>a.jsx(e,{...s,ref:n,className:m(t,`${o}-${r?"tooltip":"feedback"}`)}));U.displayName="Feedback",U.propTypes=Ft;const Ne=U,T=u.createContext({}),Fe=u.forwardRef(({id:e,bsPrefix:t,className:o,type:r="checkbox",isValid:s=!1,isInvalid:n=!1,as:c="input",...i},d)=>{const{controlId:l}=C.useContext(T);return t=y(t,"form-check-input"),a.jsx(c,{...i,ref:d,type:r,id:e||l,className:m(o,t,s&&"is-valid",n&&"is-invalid")})});Fe.displayName="FormCheckInput";const Te=Fe,we=u.forwardRef(({bsPrefix:e,className:t,htmlFor:o,...r},s)=>{const{controlId:n}=C.useContext(T);return e=y(e,"form-check-label"),a.jsx("label",{...r,ref:s,htmlFor:o||n,className:m(t,e)})});we.displayName="FormCheckLabel";const W=we;function Tt(e,t){return u.Children.toArray(e).some(o=>u.isValidElement(o)&&o.type===t)}const Se=u.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:o,inline:r=!1,reverse:s=!1,disabled:n=!1,isValid:c=!1,isInvalid:i=!1,feedbackTooltip:d=!1,feedback:l,feedbackType:h,className:v,style:g,title:N="",type:S="checkbox",label:J,children:z,as:Xt="input",...Rt},eo)=>{t=y(t,"form-check"),o=y(o,"form-switch");const{controlId:Ge}=C.useContext(T),to=C.useMemo(()=>({controlId:e||Ge}),[Ge,e]),Pe=!z&&J!=null&&J!==!1||Tt(z,W),oo=a.jsx(Te,{...Rt,type:S==="switch"?"checkbox":S,ref:eo,isValid:c,isInvalid:i,disabled:n,as:Xt});return a.jsx(T.Provider,{value:to,children:a.jsx("div",{style:g,className:m(v,Pe&&t,r&&`${t}-inline`,s&&`${t}-reverse`,S==="switch"&&o),children:z||a.jsxs(a.Fragment,{children:[oo,Pe&&a.jsx(W,{title:N,children:J}),l&&a.jsx(Ne,{type:h,tooltip:d,children:l})]})})})});Se.displayName="FormCheck";const L=Object.assign(Se,{Input:Te,Label:W}),be=u.forwardRef(({bsPrefix:e,type:t,size:o,htmlSize:r,id:s,className:n,isValid:c=!1,isInvalid:i=!1,plaintext:d,readOnly:l,as:h="input",...v},g)=>{const{controlId:N}=C.useContext(T);return e=y(e,"form-control"),a.jsx(h,{...v,type:t,size:r,ref:g,readOnly:l,id:s||N,className:m(n,d?`${e}-plaintext`:e,o&&`${e}-${o}`,t==="color"&&`${e}-color`,c&&"is-valid",i&&"is-invalid")})});be.displayName="FormControl";const wt=Object.assign(be,{Feedback:Ne}),$e=u.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},s)=>(t=y(t,"form-floating"),a.jsx(o,{ref:s,className:m(e,t),...r})));$e.displayName="FormFloating";const St=$e,Ie=u.forwardRef(({controlId:e,as:t="div",...o},r)=>{const s=C.useMemo(()=>({controlId:e}),[e]);return a.jsx(T.Provider,{value:s,children:a.jsx(t,{...o,ref:r})})});Ie.displayName="FormGroup";const Ee=Ie;function bt({as:e,bsPrefix:t,className:o,...r}){t=y(t,"col");const s=Re(),n=et(),c=[],i=[];return s.forEach(d=>{const l=r[d];delete r[d];let h,v,g;typeof l=="object"&&l!=null?{span:h,offset:v,order:g}=l:h=l;const N=d!==n?`-${d}`:"";h&&c.push(h===!0?`${t}${N}`:`${t}${N}-${h}`),g!=null&&i.push(`order${N}-${g}`),v!=null&&i.push(`offset${N}-${v}`)}),[{...r,className:m(o,...c,...i)},{as:e,bsPrefix:t,spans:c}]}const ke=u.forwardRef((e,t)=>{const[{className:o,...r},{as:s="div",bsPrefix:n,spans:c}]=bt(e);return a.jsx(s,{...r,ref:t,className:m(o,!c.length&&n)})});ke.displayName="Col";const $t=ke,Ae=u.forwardRef(({as:e="label",bsPrefix:t,column:o=!1,visuallyHidden:r=!1,className:s,htmlFor:n,...c},i)=>{const{controlId:d}=C.useContext(T);t=y(t,"form-label");let l="col-form-label";typeof o=="string"&&(l=`${l} ${l}-${o}`);const h=m(s,t,r&&"visually-hidden",o&&l);return n=n||d,o?a.jsx($t,{ref:i,as:"label",className:h,htmlFor:n,...c}):a.jsx(e,{ref:i,className:h,htmlFor:n,...c})});Ae.displayName="FormLabel";const It=Ae,Oe=u.forwardRef(({bsPrefix:e,className:t,id:o,...r},s)=>{const{controlId:n}=C.useContext(T);return e=y(e,"form-range"),a.jsx("input",{...r,type:"range",ref:s,className:m(t,e),id:o||n})});Oe.displayName="FormRange";const Et=Oe,_e=u.forwardRef(({bsPrefix:e,size:t,htmlSize:o,className:r,isValid:s=!1,isInvalid:n=!1,id:c,...i},d)=>{const{controlId:l}=C.useContext(T);return e=y(e,"form-select"),a.jsx("select",{...i,size:o,ref:d,className:m(r,e,t&&`${e}-${t}`,s&&"is-valid",n&&"is-invalid"),id:c||l})});_e.displayName="FormSelect";const kt=_e,Le=u.forwardRef(({bsPrefix:e,className:t,as:o="small",muted:r,...s},n)=>(e=y(e,"form-text"),a.jsx(o,{...s,ref:n,className:m(t,e,r&&"text-muted")})));Le.displayName="FormText";const At=Le,je=u.forwardRef((e,t)=>a.jsx(L,{...e,ref:t,type:"switch"}));je.displayName="Switch";const Ot=Object.assign(je,{Input:L.Input,Label:L.Label}),Be=u.forwardRef(({bsPrefix:e,className:t,children:o,controlId:r,label:s,...n},c)=>(e=y(e,"form-floating"),a.jsxs(Ee,{ref:c,className:m(t,e),controlId:r,...n,children:[o,a.jsx("label",{htmlFor:r,children:s})]})));Be.displayName="FloatingLabel";const _t=Be,Lt={_ref:p.any,validated:p.bool,as:p.elementType},K=u.forwardRef(({className:e,validated:t,as:o="form",...r},s)=>a.jsx(o,{...r,ref:s,className:m(e,t&&"was-validated")}));K.displayName="Form",K.propTypes=Lt;const w=Object.assign(K,{Group:Ee,Control:wt,Floating:St,Check:L,Switch:Ot,Label:It,Text:At,Range:Et,Select:kt,FloatingLabel:_t}),qe=({children:e,onSubmit:t,schema:o,defaultValues:r,...s})=>{const n=$.useForm({resolver:o?Qe.yupResolver(o):void 0,defaultValues:r});return C.useEffect(()=>{n!=null&&n.formState.isSubmitted||n.reset(r)},[r,n]),a.jsx($.FormProvider,{...n,children:a.jsx(w,{onSubmit:n.handleSubmit(t),noValidate:!0,className:"mt-3",...s,children:e})})};qe.propTypes={children:p.node.isRequired,onSubmit:p.func.isRequired,defaultValues:p.object,schema:p.object};const G=({name:e,label:t,type:o="text",placeholder:r="",...s})=>{const{register:n,formState:{errors:c}}=$.useFormContext();return a.jsxs(w.Group,{className:"mb-3",children:[a.jsx(w.Label,{htmlFor:e,children:t}),a.jsx(w.Control,{id:e,type:o,placeholder:r,isInvalid:!!c[e],...n(e),...s}),c[e]&&a.jsx(w.Control.Feedback,{type:"invalid",children:c[e].message})]})};G.propTypes={name:p.string.isRequired,label:p.string.isRequired,type:p.string,placeholder:p.string};const xe=({name:e,label:t,placeholder:o="",rows:r=3,...s})=>{const{register:n,formState:{errors:c}}=$.useFormContext();return a.jsxs(w.Group,{className:"mb-3",children:[a.jsx(w.Label,{htmlFor:e,children:t}),a.jsx(w.Control,{as:"textarea",id:e,rows:r,placeholder:o,isInvalid:!!c[e],...n(e),...s}),c[e]&&a.jsx(w.Control.Feedback,{type:"invalid",children:c[e].message})]})};xe.propTypes={name:p.string.isRequired,label:p.string.isRequired,placeholder:p.string,rows:p.number};const De=({label:e="Save",icon:t="save",...o})=>{const{formState:{isSubmitting:r}}=$.useFormContext();return a.jsxs(M,{variant:"primary",type:"submit",disabled:r,...o,children:[a.jsx(_,{name:t})," ",e,a.jsx(V,{animation:"border",className:"ms-2",size:"sm",hidden:!r})]})};De.propTypes={label:p.string,icon:p.string};const j=({label:e,icon:t,disabled:o,loading:r,...s})=>a.jsxs(M,{variant:"primary",disabled:o||r,...s,children:[a.jsx(_,{name:t})," ",e,a.jsx(V,{animation:"border",className:"ms-2",size:"sm",hidden:!r})]});j.propTypes={label:p.string.isRequired,icon:p.string.isRequired,disabled:p.bool,loading:p.bool};const P=e=>typeof e=="number"&&!isNaN(e),E=e=>typeof e=="string",He=e=>typeof e=="function",jt=e=>C.isValidElement(e)||E(e)||He(e)||P(e),F=new Map;let Q=[];const Me=new Set,Ve=()=>F.size>0;function Bt(e,t){var o;if(t)return!((o=F.get(t))==null||!o.isToastActive(e));let r=!1;return F.forEach(s=>{s.isToastActive(e)&&(r=!0)}),r}function qt(e,t){jt(e)&&(Ve()||Q.push({content:e,options:t}),F.forEach(o=>{o.buildToast(e,t)}))}function Ue(e,t){F.forEach(o=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===o.id&&o.toggle(e,t==null?void 0:t.id):o.toggle(e,t==null?void 0:t.id)})}let xt=1;const We=()=>""+xt++;function Dt(e){return e&&(E(e.toastId)||P(e.toastId))?e.toastId:We()}function k(e,t){return qt(e,t),t.toastId}function B(e,t){return{...t,type:t&&t.type||e,toastId:Dt(t)}}function q(e){return(t,o)=>k(t,B(e,o))}function f(e,t){return k(e,B("default",t))}f.loading=(e,t)=>k(e,B("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),f.promise=function(e,t,o){let r,{pending:s,error:n,success:c}=t;s&&(r=E(s)?f.loading(s,o):f.loading(s.render,{...o,...s}));const i={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(h,v,g)=>{if(v==null)return void f.dismiss(r);const N={type:h,...i,...o,data:g},S=E(v)?{render:v}:v;return r?f.update(r,{...N,...S}):f(S.render,{...N,...S}),g},l=He(e)?e():e;return l.then(h=>d("success",c,h)).catch(h=>d("error",n,h)),l},f.success=q("success"),f.info=q("info"),f.error=q("error"),f.warning=q("warning"),f.warn=f.warning,f.dark=(e,t)=>k(e,B("default",{theme:"dark",...t})),f.dismiss=function(e){(function(t){var o;if(Ve()){if(t==null||E(o=t)||P(o))F.forEach(r=>{r.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const r=F.get(t.containerId);r?r.removeToast(t.id):F.forEach(s=>{s.removeToast(t.id)})}}else Q=Q.filter(r=>t!=null&&r.options.toastId!==t)})(e)},f.clearWaitingQueue=function(e){e===void 0&&(e={}),F.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},f.isActive=Bt,f.update=function(e,t){t===void 0&&(t={});const o=((r,s)=>{var n;let{containerId:c}=s;return(n=F.get(c||1))==null?void 0:n.toasts.get(r)})(e,t);if(o){const{props:r,content:s}=o,n={delay:100,...r,...t,toastId:t.toastId||e,updateId:We()};n.toastId!==e&&(n.staleId=e);const c=n.render||s;delete n.render,k(c,n)}},f.done=e=>{f.update(e,{progress:1})},f.onChange=function(e){return Me.add(e),()=>{Me.delete(e)}},f.play=e=>Ue(!0,e),f.pause=e=>Ue(!1,e);const Ht=ze.atomWithStorage("user-logged",null),Ke=()=>{const e=Ye.useSetAtom(Ht),[,t]=Je.useLocation(),o=I.useQueryClient();return r=>{const s=r instanceof Error?r.message:"";s.includes("Not Authenticated")?(e(!1),t("/"),o.clear(),window.authErrorToastShown||(f.error("The session is no longer valid"),window.authErrorToastShown=!0,setTimeout(()=>window.authErrorToastShown=!1,2e3))):f.error(s)}},Mt=({queryFn:e,...t})=>{const o=Ke();return I.useQuery({queryFn:async()=>{try{return await e()}catch(r){throw o(r),r}},...t})};var Vt={VITE_RELATIVE_API_PATH:"api/index.php",VITE_COMPRESSION_ENABLE:"true",VITE_ANALYZER_ENABLE:"true",VITE_SOURCEMAP:"false",VITE_MANUAL_CHUNKS_ENABLE:"false",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Ut=()=>{const e=window.location.protocol,t=window.location.hostname,o=window.location.port;let r=`${e}//${t}`;return o&&(r+=`:${o}`),r},Wt=async(e,t,o)=>{const r=new AbortController,s=setTimeout(()=>r.abort(),o);try{const n=await fetch(e,{...t,signal:r.signal});clearTimeout(s);const c=n.headers.get("Content-Type");if(c&&c.includes("application/json")){const i=await n.json();if(!n.ok)throw new Error(i.error||"Server error");return i}return n}catch(n){throw n.name==="AbortError"?new Error("Request timed out"):n}},Kt=async(e,t,o=null,r=9e3)=>{const s={method:t,headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include"};return o&&(s.body=JSON.stringify(o)),Wt(e,s,r)},A=e=>{const{VITE_FULL_API_ENDPOINT:t,VITE_RELATIVE_API_PATH:o}=Vt;let r=Ut()+"/"+o;return t&&(r=t),Kt(r,"POST",e)},Y="dns-spoof-get-data",Gt=()=>Mt({queryKey:[Y],queryFn:()=>A({module:"dnsspoof",action:"fetchHosts"})}),x=({mutationFn:e,...t})=>{const o=Ke();return I.useMutation({mutationFn:async r=>await e(r),onError:r=>o(r),...t})},Pt=()=>{const e=I.useQueryClient();return x({mutationFn:({ip:t,domain:o})=>A({module:"dnsspoof",action:"addHost",ip:t,domain:o}),onSuccess:()=>{e.invalidateQueries({queryKey:[Y]}),f.success("Host added successfully")}})},Qt=()=>x({mutationFn:()=>A({module:"dnsspoof",action:"restartService"}),onSuccess:()=>{f.success("DNS updated successfully")}}),Yt=()=>x({mutationFn:()=>A({module:"dnsspoof",action:"createHostSnapshot"}),onSuccess:()=>{f.success("Backup successful")}}),Jt=()=>{const e=I.useQueryClient();return x({mutationFn:()=>A({module:"dnsspoof",action:"rollbackHostsFromSnapshot"}),onSuccess:()=>{e.invalidateQueries({queryKey:[Y]}),f.success("Hosts reset successfully")}})},zt=D.object({userIP:D.string().required("IP Address is mandatory"),userDomain:D.string().required("Domain is mandatory")}).required(),Zt=()=>{var l;const e=Gt(),{mutateAsync:t}=Pt(),{mutateAsync:o,isPending:r}=Qt(),{mutateAsync:s,isPending:n}=Yt(),{mutateAsync:c,isPending:i}=Jt(),d={ip:"",domain:"",hosts:((l=e==null?void 0:e.data)==null?void 0:l.hosts)??""};return a.jsx(ve,{title:"DNS Spoof",subtitle:"Manage your DNS spoofing settings.",query:e,children:a.jsxs(qe,{schema:zt,onSubmit:t,defaultValues:d,children:[a.jsx(xe,{name:"hosts",label:"Hosts file",rows:6,readOnly:!0}),a.jsx(G,{name:"ip",label:"IP Address",placeholder:"Enter IP address"}),a.jsx(G,{name:"domain",label:"Domain",placeholder:"Enter domain"}),a.jsx(De,{label:"Add",icon:"plus"}),a.jsx(j,{label:"Restart Service",icon:"refresh-cw",onClick:o,loading:r,className:"ms-2"}),a.jsx(j,{label:"Snapshot Hosts",icon:"copy",variant:"danger",onClick:s,loading:n,className:"ms-2"}),a.jsx(j,{label:"Rollback Hosts",icon:"shuffle",variant:"danger",onClick:c,loading:i,className:"ms-2"})]})})};return()=>a.jsx(Zt,{})});
